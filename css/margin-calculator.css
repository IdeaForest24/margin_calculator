/* --- Margin Calculator Specific Styles --- */
.top-bar {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 24px;
    align-items: center;
    margin-bottom: 24px;
}

@media (max-width: 768px) {
    .top-bar {
        grid-template-columns: 1fr;
        gap: 16px;
    }
}

.exchange-rate-info {
    background: linear-gradient(135deg, #eff6ff, #dbeafe);
    border: 1px solid #3b82f6;
    border-radius: 8px;
    padding: 12px;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.exchange-rate-info .rate {
    font-weight: 600;
    color: #1d4ed8;
}

.refresh-btn {
    background: #3b82f6;
    color: white;
    border: none;
    padding: 6px 12px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 12px;
}

.refresh-btn:hover { background: #2563eb; }

.data-management-section { display: flex; gap: 12px; align-items: stretch; }

.excel-upload-compact {
    flex-grow: 1;
    background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
    border: 2px dashed #0ea5e9;
    border-radius: 8px;
    padding: 16px;
    text-align: center;
    transition: all 0.3s ease;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    min-width: 200px;
}

.excel-upload-compact:hover {
    border-color: #0284c7;
    background: linear-gradient(135deg, #e0f2fe, #bae6fd);
    transform: scale(1.02);
}

.excel-upload-compact .upload-icon { font-size: 24px; color: #0ea5e9; }
.excel-upload-compact .upload-text { font-size: 14px; font-weight: 600; color: #1e40af; }
.file-input { display: none; }

.clear-data-btn {
    background: #fee2e2;
    color: #dc2626;
    border: 1px solid #fecaca;
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 600;
    transition: all 0.2s ease;
    padding: 16px 24px;
}

.clear-data-btn:hover { background: #fecaca; color: #b91c1c; transform: scale(1.02); }

.help-btn {
    background: linear-gradient(135deg, #f0fdf4, #dcfce7);
    color: #16a34a;
    border: 2px solid #bbf7d0;
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 600;
    transition: all 0.2s ease;
    padding: 16px 24px;
}

.help-btn:hover { 
    background: linear-gradient(135deg, #dcfce7, #bbf7d0); 
    color: #15803d; 
    transform: scale(1.02); 
}

.upload-status {
    margin-bottom: 16px;
    padding: 12px;
    border-radius: 8px;
    font-weight: 500;
}
.upload-status.success { background: #dcfce7; color: #16a34a; border: 1px solid #bbf7d0; }
.upload-status.error { background: #fef2f2; color: #dc2626; border: 1px solid #fecaca; }
.upload-status.info { background: #eff6ff; color: #2563eb; border: 1px solid #dbeafe; }

/* 입력 섹션 전체 너비 사용 */
.input-section-wrapper {
    width: 100%;
}

/* 상단 2열 그리드 (제품 원가 + 상품 정보) */
.top-input-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 24px;
    margin-bottom: 24px;
}

@media (max-width: 768px) {
    .top-input-grid {
        grid-template-columns: 1fr;
    }
}

.input-section { display: flex; flex-direction: column; gap: 24px; }
.section { padding: 24px; border-radius: 8px; border: 1px solid #e5e7eb; }
.section.blue { background-color: #eff6ff; border-color: #dbeafe; }
.section.orange { background-color: #fff7ed; border-color: #fed7aa; }
.section.green { background-color: #f0fdf4; border-color: #bbf7d0; }

.section-header { display: flex; align-items: center; gap: 8px; margin-bottom: 16px; font-size: 18px; font-weight: 600; }
.section-header.blue { color: #1d4ed8; }
.section-header.orange { color: #ea580c; }
.section-header.green { color: #16a34a; }

.form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
@media (max-width: 768px) { .form-grid { grid-template-columns: 1fr; } }

.form-group { display: flex; flex-direction: column; }
.form-group.full { grid-column: span 2; }
@media (max-width: 768px) { .form-group.full { grid-column: span 1; } }

.help-text { font-size: 12px; color: #6b7280; margin-top: 4px; }
.dimension-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; }

@media (max-width: 768px) {
    .dimension-grid { grid-template-columns: 1fr 1fr; }
}

.info-box { font-size: 14px; color: #1d4ed8; background-color: #dbeafe; padding: 12px; border-radius: 6px; margin-top: 16px; border: 1px solid #bfdbfe; }

.calculate-btn {
    width: 100%;
    background: linear-gradient(to right, #2563eb, #16a34a);
    color: white;
    padding: 12px 24px;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}
.calculate-btn:hover { background: linear-gradient(to right, #1d4ed8, #15803d); transform: translateY(-1px); }

.results-section { display: flex; flex-direction: column; gap: 24px; }

ul { list-style: none; padding-left: 0; }
li { margin-bottom: 8px; font-size: 14px; }

.loading {
    display: inline-block;
    width: 16px;
    height: 16px;
    border: 2px solid #f3f4f6;
    border-top: 2px solid #3b82f6;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

.service-type-toggle { display: flex; background: #f3f4f6; border-radius: 8px; padding: 4px; margin-bottom: 16px; }
.service-type-option { flex: 1; padding: 8px 16px; text-align: center; border-radius: 6px; cursor: pointer; transition: all 0.2s; font-size: 14px; font-weight: 500; }
.service-type-option.active { background: white; color: #1d4ed8; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); }
.service-type-option:not(.active) { color: #6b7280; }
.service-type-option:hover:not(.active) { background: #e5e7eb; }

/* ================================== */
/*       모달 팝업 스타일             */
/* ================================== */

.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.6);
    animation: fadeIn 0.3s ease;
}

.modal.show {
    display: flex;
    align-items: center;
    justify-content: center;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.modal-content {
    background: white;
    border-radius: 16px;
    width: 95%;
    max-width: 1400px;
    max-height: 90vh;
    display: flex;
    flex-direction: column;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    animation: slideDown 0.3s ease;
}

.help-modal-content {
    max-width: 1200px;
}

@keyframes slideDown {
    from { 
        opacity: 0;
        transform: translateY(-50px);
    }
    to { 
        opacity: 1;
        transform: translateY(0);
    }
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 24px 32px;
    border-bottom: 2px solid #e5e7eb;
    background: linear-gradient(135deg, #eff6ff, #dbeafe);
}

.modal-header h2 {
    margin: 0;
    font-size: 24px;
    color: #1f2937;
    font-weight: 700;
}

.modal-close {
    background: none;
    border: none;
    font-size: 28px;
    cursor: pointer;
    color: #6b7280;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

.modal-close:hover {
    background: #f3f4f6;
    color: #1f2937;
    transform: rotate(90deg);
}

.modal-body {
    padding: 32px;
    overflow-y: auto;
    flex: 1;
}

.help-modal-body {
    padding: 0;
}

.modal-footer {
    padding: 20px 32px;
    border-top: 2px solid #e5e7eb;
    display: flex;
    justify-content: center;
    background: #f9fafb;
}

.modal-confirm-btn {
    background: linear-gradient(to right, #2563eb, #16a34a);
    color: white;
    border: none;
    padding: 12px 48px;
    border-radius: 8px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
}

.modal-confirm-btn:hover {
    background: linear-gradient(to right, #1d4ed8, #15803d);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
}

/* ================================== */
/*     도움말 탭 스타일               */
/* ================================== */

.help-tabs {
    display: flex;
    border-bottom: 2px solid #e5e7eb;
    background: #f9fafb;
    position: sticky;
    top: 0;
    z-index: 10;
}

.help-tab-btn {
    flex: 1;
    padding: 16px;
    background: none;
    border: none;
    border-bottom: 3px solid transparent;
    font-size: 16px;
    font-weight: 600;
    color: #6b7280;
    cursor: pointer;
    transition: all 0.2s ease;
}

.help-tab-btn:hover {
    color: #1d4ed8;
    background: #eff6ff;
}

.help-tab-btn.active {
    color: #1d4ed8;
    border-bottom-color: #3b82f6;
    background: white;
}

.help-tab-content {
    padding: 32px;
}

.help-tab-content h3 {
    color: #1f2937;
    font-size: 20px;
    margin-bottom: 16px;
}

.help-tab-content ol, 
.help-tab-content ul {
    list-style-position: inside;
}

/* ================================== */
/*     가로 Flow 레이아웃 스타일       */
/* ================================== */

.horizontal-flow {
    display: flex;
    gap: 16px;
    align-items: stretch;
    overflow-x: auto;
    padding-bottom: 16px;
}

.flow-step {
    min-width: 280px;
    background: white;
    border: 2px solid #e5e7eb;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    transition: all 0.2s ease;
    flex-shrink: 0;
}

.flow-step:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.12);
}

.flow-step.highlight {
    background: linear-gradient(135deg, #f0fdf4, #dcfce7);
    border-color: #16a34a;
    border-width: 3px;
}

.flow-step-header {
    font-size: 16px;
    font-weight: 700;
    color: #1f2937;
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 2px solid #e5e7eb;
}

.flow-step.highlight .flow-step-header {
    color: #16a34a;
    border-bottom-color: #16a34a;
    font-size: 18px;
}

.flow-step-content {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.flow-value {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 12px;
    border-radius: 6px;
    background: #f9fafb;
    font-size: 14px;
}

.flow-value.main {
    font-size: 18px;
    font-weight: 700;
    background: #eff6ff;
    border: 1px solid #dbeafe;
    padding: 12px;
}

.flow-value.small {
    font-size: 13px;
    color: #4b5563;
}

.flow-value.total {
    font-weight: 600;
    background: #fef2f2;
    border: 1px solid #fecaca;
    margin-top: 8px;
    padding-top: 10px;
    border-top: 2px dashed #fca5a5;
}

.flow-arrow {
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 32px;
    color: #3b82f6;
	font-weight: bold;
    min-width: 40px;
    flex-shrink: 0;
}

.flow-arrow.final {
    color: #16a34a;
    font-size: 36px;
}

.value-number {
    font-weight: 700;
    font-size: 1.1em;
}

.value-number.blue { color: #1d4ed8; }
.value-number.green { color: #16a34a; }
.value-number.red { color: #dc2626; }
.value-number.orange { color: #ea580c; }

.target-info {
    font-size: 0.85em;
    color: #6b7280;
    font-weight: 400;
}

/* 설정 정보 섹션 */
.settings-info-section {
    margin-top: 32px;
    padding: 24px;
    background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
    border: 2px solid #3b82f6;
    border-radius: 12px;
}

.settings-info-header {
    font-size: 18px;
    font-weight: 700;
    color: #1d4ed8;
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 2px solid #3b82f6;
}

.settings-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 16px;
}

.setting-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    padding: 10px;
    background: white;
    border-radius: 6px;
}

.setting-label {
    font-weight: 600;
    color: #374151;
}

.setting-value {
    color: #1d4ed8;
    font-weight: 500;
}

/* 반응형 - 모바일 */
@media (max-width: 1024px) {
    .modal-content {
        width: 98%;
        max-height: 95vh;
    }

    .modal-header {
        padding: 20px;
    }

    .modal-header h2 {
        font-size: 20px;
    }

    .modal-body {
        padding: 20px;
    }

    .horizontal-flow {
        flex-direction: column;
    }

    .flow-step {
        min-width: 100%;
    }

    .flow-arrow {
        transform: rotate(90deg);
        margin: 8px 0;
    }

    .settings-grid {
        grid-template-columns: 1fr;
    }
    
    .data-management-section {
        flex-wrap: wrap;
    }
    
    .excel-upload-compact {
        min-width: 100%;
    }
}

@media (max-width: 768px) {
    .modal-header {
        padding: 16px;
    }

    .modal-header h2 {
        font-size: 18px;
    }

    .modal-body {
        padding: 16px;
    }

    .modal-footer {
        padding: 16px;
    }

    .flow-step {
        padding: 16px;
    }

    .flow-step-header {
        font-size: 14px;
    }

    .flow-value.main {
        font-size: 16px;
    }
    
    .help-tab-content {
        padding: 20px;
    }
}

/* 목적지 2단계 선택 그리드 */
.destination-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
}

/* 비활성화된 select 요소 스타일 */
select:disabled {
    background-color: #f3f4f6;
    cursor: not-allowed;
    color: #9ca3af;
}

@media (max-width: 768px) {
    .destination-grid {
        grid-template-columns: 1fr;
    }
}

/* UI 레이아웃 수정을 위한 특별 그리드 */
.form-grid-special {
    display: grid;
    grid-template-columns: 2fr 1fr; /* 2:1 비율로 컬럼 분할 */
    gap: 16px;
    align-items: end; /* 요소들을 하단에 정렬 */
}

.form-grid-special .form-group.span-two {
    grid-column: span 1; /* span-two 클래스가 있어도 1칸만 차지하도록 */
}

@media (max-width: 1024px) {
    .form-grid-special {
        grid-template-columns: 1fr; /* 화면이 작아지면 1열로 변경 */
    }
}
